# 📝 更新日志 (CHANGELOG)

本文档记录了植物监测系统的所有版本更新和重要变更。

## [v1.0.0] - 2024-01-01

### ✨ 新增功能
- **完整的硬件系统**: 基于STM32F103ZET6和ESP32的双MCU架构
- **多传感器支持**: 温湿度、土壤湿度、光照强度传感器数据采集
- **无线通信**: ESP32 WiFi热点模式，支持TCP通信协议
- **Qt桌面应用**: 实时数据监控和可视化界面
- **数据可视化**: 历史数据图表显示和趋势分析
- **设备状态监控**: 实时连接状态和数据接收状态显示
- **配置管理**: 网络连接参数和显示设置的保存/加载

### 🔧 技术特性
- **STM32固件**: 
  - 12位ADC数据采集
  - UART串口通信 (115200 bps)
  - 实时数据处理和格式化
  - 低功耗运行模式
- **ESP32固件**:
  - WiFi热点模式 (AP Mode)
  - TCP服务器实现
  - 多客户端并发支持
  - 数据转发和缓存机制
- **Qt应用**:
  - 跨平台支持 (Windows/Linux/macOS)
  - TCP客户端通信
  - 实时图表更新
  - 数据导出功能
  - 多语言支持准备

### 📦 预编译固件
- `serial2_ADC.hex` - STM32F103ZET6固件
- `AP_TCPServer.bin` - ESP32主程序固件
- `bootloader.bin` - ESP32引导程序

### 🏗️ 系统架构
```
STM32F103ZET6 (主控) ←→ ESP32 (WiFi) ←→ Qt应用 (监控)
       ↓
   传感器阵列
```

### 📋 支持的硬件
- STM32F103ZET6开发板
- ESP32/ESP32-C3开发板
- DHT22/SHT30温湿度传感器
- 土壤湿度传感器
- 光照传感器 (LDR/BH1750)

### 🔗 通信协议
- **STM32 ↔ ESP32**: UART (115200 bps)
- **ESP32 ↔ Qt应用**: TCP/IP (端口8080)
- **数据格式**: `h[温度],[湿度],[土壤湿度],[光照]~`

### 📊 数据特性
- **采样频率**: 1Hz (可配置)
- **数据精度**: 温度±0.5°C，湿度±3%RH
- **数据范围**: 
  - 温度: -40°C ~ +80°C
  - 湿度: 0% ~ 100%RH
  - 土壤湿度: 0% ~ 100%
  - 光照: 0 ~ 100000 Lux

### 💾 存储功能
- 历史数据缓存 (最近100个数据点)
- 设置参数持久化保存
- 数据导出CSV格式支持

### 🎨 用户界面
- 现代化Material Design风格
- 实时数据仪表盘
- 历史数据趋势图表
- 设备连接管理界面
- 多语言界面支持框架

### 🔧 开发工具支持
- STM32CubeIDE项目文件
- ESP-IDF标准项目结构
- Qt Creator项目配置
- 跨平台编译支持

---

## 📋 版本规划

### [v1.1.0] - 计划中 (2024年Q2)

#### 🚀 计划新功能
- **Web界面**: 基于HTML5的Web监控界面
- **移动端应用**: Android/iOS原生应用
- **云端同步**: 数据云端存储和多设备同步
- **报警系统**: 
  - 阈值报警配置
  - 邮件/短信通知
  - 微信推送支持
- **数据分析**:
  - 数据统计分析
  - 生长趋势预测
  - 异常检测算法
- **设备管理**:
  - 多设备支持
  - 设备分组管理
  - 远程固件更新 (OTA)

#### 🔧 技术改进
- **性能优化**:
  - 数据压缩传输
  - 更高效的图表渲染
  - 内存使用优化
- **安全增强**:
  - WiFi WPA3支持
  - 数据传输加密
  - 用户认证系统
- **扩展性**:
  - 传感器热插拔支持
  - 模块化固件架构
  - 插件系统设计

### [v1.2.0] - 计划中 (2024年Q3)

#### 🌐 物联网集成
- MQTT协议支持
- 主流云平台集成 (阿里云IoT、腾讯云IoT)
- HomeAssistant集成
- 第三方API支持

#### 🤖 智能功能
- 机器学习模型集成
- 自动灌溉决策
- 生长环境优化建议
- 病虫害预警系统

#### 📱 用户体验
- 语音控制支持
- AR/VR数据可视化
- 社交分享功能
- 用户社区平台

---

## 🛠️ 技术债务和已知问题

### 当前版本已知问题
1. **ESP32首次连接延迟**: 连接建立可能需要30秒
2. **温度传感器校准**: 需要根据环境手动校准参数
3. **Qt高DPI支持**: 高分辨率显示器可能存在界面缩放问题
4. **长时间运行稳定性**: 超过24小时连续运行可能出现内存泄漏

### 计划修复
- [ ] 优化ESP32连接算法
- [ ] 实现自动温度校准
- [ ] 完善Qt高DPI支持
- [ ] 内存管理优化

---

## 🔄 版本兼容性

### 固件兼容性
- **STM32固件**: 向前兼容，新版本固件可用于旧硬件
- **ESP32固件**: API保持稳定，支持渐进式升级
- **Qt应用**: 支持多版本固件的向下兼容

### 硬件兼容性
- **STM32系列**: 支持STM32F103系列所有型号
- **ESP32系列**: 支持ESP32、ESP32-S2、ESP32-C3
- **传感器**: 兼容标准I2C/ADC接口传感器

---

## 📈 性能指标

### v1.0.0性能数据
- **数据采集延迟**: < 100ms
- **WiFi连接时间**: 5-30秒
- **数据传输延迟**: < 50ms
- **Qt应用启动时间**: < 3秒
- **内存使用**:
  - STM32: ~15KB RAM
  - ESP32: ~80KB RAM
  - Qt应用: ~25MB RAM
- **功耗**:
  - STM32: ~50mA @ 3.3V
  - ESP32: ~150mA @ 3.3V (WiFi活跃)
  - 总功耗: ~0.7W

---

## 🚀 贡献者

### v1.0.0贡献者
- **longzheng268** - 项目创建者和主要开发者
  - STM32固件开发
  - ESP32固件开发
  - Qt应用开发
  - 文档编写
  - 项目管理

### 如何贡献
我们欢迎社区贡献！请参考以下方式：

1. **代码贡献**: Fork项目，提交Pull Request
2. **问题报告**: 在GitHub Issues提交Bug报告
3. **功能建议**: 提交Feature Request
4. **文档改进**: 完善文档和教程
5. **测试反馈**: 在不同平台测试并反馈问题

---

## 📞 联系我们

- **GitHub**: [https://github.com/longzheng268/plant_monitor](https://github.com/longzheng268/plant_monitor)
- **Issues**: [项目问题追踪](https://github.com/longzheng268/plant_monitor/issues)
- **Discussions**: [社区讨论](https://github.com/longzheng268/plant_monitor/discussions)

---

<div align="center">
  <p><strong>感谢您的关注和支持！</strong></p>
  <p>让我们一起打造更好的智能农业监测系统！</p>
</div>